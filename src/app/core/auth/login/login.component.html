<section class="border border-gray-200 shadow-xs rounded bg-gray-200 md:w-1/2 mx-auto mt-16 p-6">
  <div>
    <h2 class="mb-3 text-indigo-600 font-bold text-3xl text-center">Login Now</h2>
  </div>

  <form [formGroup]="loginForm" (ngSubmit)="submitLoginerForm()">
    <div>
      @let emailControl = loginForm.get('email');
      <label for="email" class="elite-lable">Email</label>
      <input
        formControlName="email"
        type="email"
        id="email"
        class="elite-input mb-2"
        [class.bg-indigo-50]="emailControl?.valid"
        [class.bg-red-50]="emailControl?.invalid && emailControl?.touched"
      />

      @if (emailControl?.errors && emailControl?.touched) {
        <div
          class="flex items-center p-2.5 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-red-200 dark:text-red-400 my-2"
          role="alert"
        >
          <div>
            <ul class="list-disc list-inside">
              @if (emailControl?.getError('required')) {
                <li>Email is required</li>
              } @else if (emailControl?.getError('email')) {
                <li>Please enter a valid email address</li>
              }
            </ul>
          </div>
        </div>
      }
    </div>
    <div class="mb-5 relative">
      @let passwordControl = loginForm.get('password');
      <label for="password" class="elite-lable">Password</label>
      <input
        [class.bg-indigo-50]="passwordControl?.valid"
        [class.bg-red-50]="passwordControl?.invalid && passwordControl?.touched"
        formControlName="password"
        [type]="flag === true ? 'password' : 'text'"
        id="password"
        class="elite-input"
      />
      <span
        (click)="togglePasswordType()"
        class="absolute top-0 end-3 translate-y-[150%] cursor-pointer"
      >
        <i
          class="fas transition-colors duration-200 hover:text-indigo-700"
          [class.fa-eye]="flag"
          [class.fa-eye-slash]="!flag"
          [class.text-gray-600]="!flag"
          [class.text-indigo-600]="flag"
        ></i>
      </span>

      @if (passwordControl?.errors && passwordControl?.touched) {
        <div
          class="flex items-center p-2.5 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-red-200 dark:text-red-400 my-2"
          role="alert"
        >
          <div>
            <ul class="list-disc list-inside">
              @if (passwordControl?.getError('required')) {
                <li>Password is required</li>
              } @else if (passwordControl?.getError('minlength')) {
                <li>Password must be at least 6 characters</li>
              } @else if (passwordControl?.getError('pattern')) {
                <li>Password must contain letters and numbers</li>
              }
            </ul>
          </div>
        </div>
      }
    </div>

    <!-- Forgot Password Link -->
    <div class="mb-4 text-right">
      <a
        routerLink="/forget-password"
        class="text-sm text-indigo-600 hover:text-indigo-800 hover:underline font-medium transition-colors duration-200 cursor-pointer"
      >
        Forgot your password?
      </a>
    </div>

    @if (errorMessage()) {
      <div
        class="flex items-center justify-center gap-2 p-2.5 mb-4 text-sm text-red-800 rounded-lg bg-red-100 dark:bg-red-200 dark:text-red-400 w-[70%] mx-auto my-4"
        role="alert"
      >
        <svg
          class="w-5 h-5 text-red-600 shrink-0"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 20 20"
          aria-hidden="true"
        >
          <path
            fill-rule="evenodd"
            d="M8.257 3.099c.765-1.36 2.72-1.36 3.485 0l6.451 11.477c.75 1.334-.213 2.996-1.742 2.996H3.548c-1.53 0-2.492-1.662-1.743-2.996L8.257 3.1zM11 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-1-7a1 1 0 0 0-1 1v3a1 1 0 1 0 2 0V7a1 1 0 0 0-1-1z"
            clip-rule="evenodd"
          />
        </svg>

        <p class="text-center">
          {{ errorMessage() }}
        </p>
      </div>
    }

    <div class="mb-3 flex flex-wrap justify-center mt-3">
      <button [disabled]="isLoading()" type="submit" class="btn-elite px-8 py-3 w-full md:w-1/2">
        Login
        @if (isLoading()) {
          <span>
            <i class="fas fa-spinner animate-spin"></i>
          </span>
        }
      </button>
    </div>
    <!-- Don't have an account Link -->
    <div class="mt-6 text-center border-t border-gray-300 pt-4">
      <p class="text-sm text-gray-600">
        Don't have an account?
        <a
          routerLink="/register"
          class="text-indigo-600 hover:text-indigo-800 font-semibold hover:underline transition-colors duration-200 ml-1 cursor-pointer"
        >
          Sign up now
        </a>
      </p>
    </div>
  </form>
</section>
