<section
  class="border border-gray-300 shadow-lg rounded-xl bg-white w-full max-w-xl mx-auto my-16 p-8"
>
  <div class="mb-8">
    <h2 class="text-indigo-600 font-bold text-4xl text-center mb-2">Checkout</h2>
    <p class="text-gray-500 text-center text-sm">Complete your order details</p>
  </div>

  <form [formGroup]="cheoutForm" (ngSubmit)="submiitCheckoutForm()" class="space-y-6">
    <div formGroupName="shippingAddress">
      <!-- Details -->
      <div>
        <label for="details" class="block text-gray-700 font-semibold mb-2"> Order Details </label>
        <textarea
          formControlName="details"
          id="details"
          rows="4"
          class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition resize-none text-gray-900 bg-white"
          placeholder="Enter your order details..."
        ></textarea>
      </div>

      <!-- Phone -->
      <div>
        <label for="phone" class="block text-gray-700 font-semibold mb-2"> Phone Number </label>
        <input
          formControlName="phone"
          type="tel"
          id="phone"
          class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition text-gray-900 bg-white"
          placeholder="+20 123 456 7890"
        />
      </div>

      <!-- City -->
      <div>
        <label for="city" class="block text-gray-700 font-semibold mb-2"> City </label>
        <input
          formControlName="city"
          type="text"
          id="city"
          class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition text-gray-900 bg-white"
          placeholder="Enter your city"
        />
      </div>

      <!-- Address (إضافة) -->
      <div>
        <label for="address" class="block text-gray-700 font-semibold mb-2"> Address </label>
        <input
          formControlName="address"
          type="text"
          id="address"
          class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition text-gray-900 bg-white"
          placeholder="Street, Building number"
        />
      </div>
    </div>

    <!-- Payment Methods -->
    <div class="pt-4">
      <label class="block text-gray-700 font-semibold mb-3"> Payment Method </label>
      <div class="grid grid-cols-2 gap-3">
        <button
          type="button"
          (click)="selectPaymentMethod('visa')"
          [class]="
            selectedPaymentMethod() === 'visa'
              ? 'py-3 px-4 border-2 border-indigo-500 bg-indigo-500 text-white rounded-lg font-semibold hover:bg-indigo-600 hover:border-indigo-600 transition-all duration-200 transform scale-105 shadow-lg flex items-center justify-center gap-2'
              : 'py-3 px-4 border-2 border-gray-300 bg-white text-gray-700 rounded-lg font-semibold hover:border-indigo-500 hover:bg-indigo-50 transition-all duration-200 flex items-center justify-center gap-2'
          "
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
            ></path>
          </svg>
          Visa Card
          @if (selectedPaymentMethod() === 'visa') {
            <svg class="w-4 h-4 ml-auto" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"
              ></path>
            </svg>
          }
        </button>
        <button
          type="button"
          (click)="selectPaymentMethod('cash')"
          [class]="
            selectedPaymentMethod() === 'cash'
              ? 'py-3 px-4 border-2 border-green-500 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 hover:border-green-600 transition-all duration-200 transform scale-105 shadow-lg flex items-center justify-center gap-2'
              : 'py-3 px-4 border-2 border-gray-300 bg-white text-gray-700 rounded-lg font-semibold hover:border-green-500 hover:bg-green-50 transition-all duration-200 flex items-center justify-center gap-2'
          "
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"
            ></path>
          </svg>
          Cash
          @if (selectedPaymentMethod() === 'cash') {
            <svg class="w-4 h-4 ml-auto" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"
              ></path>
            </svg>
          }
        </button>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="pt-4">
      <button
        type="submit"
        [disabled]="isProcessing()"
        [class]="
          isProcessing()
            ? 'w-full bg-gray-400 text-white font-bold py-4 px-6 rounded-lg cursor-not-allowed flex items-center justify-center gap-2'
            : 'w-full bg-linear-to-r from-indigo-600 to-purple-600 text-white font-bold py-4 px-6 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-[1.02] shadow-lg flex items-center justify-center gap-2 cursor-pointer'
        "
      >
        @if (isProcessing()) {
          <svg
            class="animate-spin h-5 w-5"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
          >
            <circle
              class="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="4"
            ></circle>
            <path
              class="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            ></path>
          </svg>
        } @else {
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M5 13l4 4L19 7"
            ></path>
          </svg>
        }
        {{ submitButtonText() }}
      </button>
    </div>

    <!-- Secure Badge -->
    <div class="text-center pt-2">
      <p class="text-gray-500 text-sm flex items-center justify-center gap-1">
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
          <path
            fill-rule="evenodd"
            d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
            clip-rule="evenodd"
          ></path>
        </svg>
        Secure & encrypted payment
      </p>
    </div>
  </form>
</section>
